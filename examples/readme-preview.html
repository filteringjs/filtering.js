<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>filtering.js - README preview</title>

    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <link rel="stylesheet" href="../dist/example-style.css">
    <script src="../dist/index.js"></script>
</head>
<body>

<div id="root">
    <div id="filtering">
        <div class="filtering-group" data-group-name="color">
            <div class="filtering-filter" data-filter-name="red">Red <span class="total"></span></div>
            <div class="filtering-filter" data-filter-name="green">Green <span class="total"></span></div>
            <div class="filtering-filter" data-filter-name="blue">Blue <span class="total"></span></div>
        </div>
        <div class="filtering-group" data-group-name="size">
            <div class="filtering-filter" data-filter-name="small">Small <span class="total"></span></div>
            <div class="filtering-filter" data-filter-name="large">Large <span class="total"></span></div>
        </div>
    </div>

    <div id="items">
        <div id="item-1" class="filtering-item" data-filter-color="red" data-filter-size="small"></div>
        <div id="item-2" class="filtering-item" data-filter-color="blue" data-filter-size="large"></div>
        <div id="item-3" class="filtering-item" data-filter-color="red" data-filter-size="large"></div>
        <div id="item-4" class="filtering-item" data-filter-color="red" data-filter-size="small"></div>
        <div id="item-5" class="filtering-item" data-filter-color="green" data-filter-size="small"></div>
    </div>
</div>

<script>
    const {FilteringFlow} = filteringjs;

    class MyFlow extends FilteringFlow {
        handleFilterResult(result) {
            super.handleFilterResult(result);
            for (const group of result.groups) {
                for (const filter of group.filters) {
                    const filterElement = filter.schemaFilter.data.element;
                    // Update the total items number of the filter
                    filterElement.querySelector('.total').innerText = `(${filter.possibleItems.length})`;
                }
            }
        }
    }
    new MyFlow(document.querySelector('#root'));
</script>

</body>
</html>
